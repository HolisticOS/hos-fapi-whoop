# WHOOP Microservice Environment Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# DATABASE CONFIGURATION (Supabase)
# =============================================================================

# Supabase Configuration
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your_supabase_anonymous_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here  # Required for backend - bypasses RLS

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

# API Server Settings
API_HOST=0.0.0.0
API_PORT=8001
ENVIRONMENT=development

# Internal API Security
SERVICE_API_KEY=dev-api-key-change-in-production

# =============================================================================
# WHOOP INTEGRATION CONFIGURATION
# =============================================================================

# WHOOP OAuth 2.0 Settings
WHOOP_CLIENT_ID=your_whoop_client_id_here
WHOOP_CLIENT_SECRET=your_whoop_client_secret_here
WHOOP_REDIRECT_URL=http://localhost:8001/api/v1/whoop/auth/callback
WHOOP_WEBHOOK_SECRET=your_whoop_webhook_secret_here

# WHOOP API Settings
# WHOOP API v2 base URL (endpoints: /v2/activity/sleep, /v2/recovery, /v2/cycle, etc.)
WHOOP_API_BASE_URL=https://api.prod.whoop.com/developer/v2

# WHOOP Rate Limiting Settings (100/min, 10K/day)
WHOOP_RATE_LIMIT_DELAY=0.6
WHOOP_MAX_RETRIES=3
WHOOP_RETRY_BASE_DELAY=2.0
WHOOP_REQUEST_TIMEOUT=30
WHOOP_RATE_LIMIT_PER_MINUTE=100
WHOOP_RATE_LIMIT_PER_DAY=10000

# =============================================================================
# AI INSIGHTS CONFIGURATION (Gemini)
# =============================================================================

# Google Gemini API Settings
# Get your API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.5-flash  # Fast, cost-efficient model (recommended)
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_OUTPUT_TOKENS=2048

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Cache TTL Settings (in seconds)
CACHE_TTL_OVERVIEW=3600    # 1 hour
CACHE_TTL_METRICS=7200     # 2 hours
CACHE_TTL_INSIGHTS=3600    # 1 hour (insights don't change frequently)

# =============================================================================
# DEVELOPMENT/TESTING SETTINGS
# =============================================================================

# Development flags
DEBUG=true
LOG_LEVEL=INFO

# Testing Configuration
TEST_USER_ID=test_user_123
TEST_WHOOP_USER_ID=whoop_test_12345

# =============================================================================
# PRODUCTION SECURITY NOTES
# =============================================================================

# For production deployment:
# 1. Change SERVICE_API_KEY to a secure random string
# 2. Set ENVIRONMENT to "production"
# 3. Use HTTPS for WHOOP_REDIRECT_URL
# 4. Secure your Supabase keys with RLS policies
# 5. Set DEBUG=false and LOG_LEVEL=WARNING or ERROR
# 6. Consider encrypting OAuth tokens in database
# 7. Enable webhook signature verification